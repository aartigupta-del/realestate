<%@ Page Language="C#" AutoEventWireup="true" CodeFile="viewProperty.aspx.cs" Inherits="Admin_viewProperty" %>

<!--#include file="Header.aspx"-->
<!-- Sidebar -->
<!--#include file="Sidebar.aspx"-->
<!-- End of Sidebar -->
<!-- Content Wrapper -->
<div id="content-wrapper" class="d-flex flex-column">
<!-- Main Content -->
<div id="content">
   <!-- Topbar -->
   <!--#include file="Topbar.aspx"-->
   <!-- End of Topbar -->
   <!-- Begin Page Content -->
   <div class="container-fluid">
      <!-- Page Heading -->
      <div class="d-sm-flex align-items-center justify-content-between mb-4">
         <h1 class="h3 mb-0 text-gray-800">Dashboard</h1>
         <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
            class="fas fa-download fa-sm text-white-50"></i> Generate Report</a>
      </div>
      <div class="row">
         <!-- Area Chart -->
         <div class="col-xl-12 col-lg-7">
            <div class="card shadow mb-4">
               <!-- Card Body -->
               <div class="card-body">
                     
        <table class="table">
  <thead>
    <tr>
      <th scope="col">Sr No</th>
      <th scope="col">PropertyName</th>
      <th scope="col">Area</th>
      <th scope="col">Whatsapp</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
      <asp:repeater  ID="viewproperty" runat="server">
          <ItemTemplate>
    <tr>
      <th scope="row"><%#Eval("id")%></th>
      <td><%#Eval("propertyname")%></td>
      <td><%#Eval("area")%></td>
      <td><%#Eval("whatsapp")%></td>
      <td><a href="edit.aspx?edit=<%#Eval("id")%>">Edit</a><a class="onclickdelete" data-id="<%#Eval("id")%>">Delete</a></td>
      <td></td>
   </tr>
        </ItemTemplate>
    </asp:repeater>
  </tbody>
</table>
                 
               </div>
            </div>
         </div>
      </div>
   </div>
   <!-- /.container-fluid -->
</div>
<!-- End of Main Content -->
    <script src="https://code.jquery.com/jquery-3.6.0.js" ></script>
    <script>
        $(document).ready(function () {
        
            $(".onclickdelete").on('click' , function(){
                console.log('Hello');
                let id = $(this).attr("data-id")
                console.log(id);
                $.ajax({
                    type: "POST",
                     contentType: "application/json; charset=utf-8",
                    url: "WebService.asmx/Deleteproperty",
                    data: "{'id':'"+id+"'}",
                    success: function (response) {
                        console.log(response, 'response');
                        location.reload()
                    },
                    dataType: "json"
                });

            })
           
        })
    </script>


























































































































































































































































































































































































































































































































































































































































































































































































        